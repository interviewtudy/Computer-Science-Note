# 목차

### [네트워크의 기초](#네트워크의-기초-1)

1. [처리량과 지연 시간](#처리량과-지연-시간)
2. [네트워크 토폴리지와 병목 현상](#네트워크-토폴리지와-병목-현상)
3. [네트워크 분류](#네트워크-분류)
4. [네트워크 성능 분석 명령어](#네트워크-성능-분석-명령어)
5. [네트워크 프로토콜 표준화](#네트워크-프로토콜-표준화)

### [TCP/IP 4계층 모델](#tcpip-4계층-모델-1)

1. [계층 구조](#계층-구조)
2. [PDU](#pdu)

# 네트워크의 기초

### 네트워크 용어 정리

네트워크: 노드와 링크가 서로 연결되어 리소스를 공유하는 집합
노드: 서버, 라우터, 스위치 등 네트워크 장치
링크: 유선 또는 무선
트래픽: 특정 시점에 링크 내에 흐르는 데이터의 양
대역폭 : 주어진 시간 동안 네트워크 연결을 통해 흐를 수 있는 최대 비트 수

## 처리량과 지연 시간

네트워크 구축할 떄는 좋은 네트워크로 만드는 것이 중요하다

좋은 네트워크란 *많은 처리량을 처리*할 수 있으며 _지연 시간이 짧고_ 장애 빈도가 적으며 좋은 보안을 갖춘 네트워크를 의미

### 처리량

- 링크 내에서 성공적으로 전달된 데이터의 양, 보통 트래픽을 처리량을 나타냄
- 단위: bps (초당 전송, 수신되는 비트 수)

**영향을 주는 요소**
|사용자 트래픽|네트워크 장치 간의 대역폭|네트워크 중간에 발생하는 에러|장치의 하드웨어 스펙|

- 트래픽이 많아졌다 = 흐르는 데이터가 많다
- 처리량이 많아졌다 = 처리되는 트래픽이 많아졌다

### 지연 시간

- 요청이 처리되는 시간 (요청이 두 장치 사이를 왕복하는 데 걸린 시간)
  **영향을 주는 요소**
  |매체 타입(무선, 유선)|패킷 크기|라우터의 패킷 처리 시간|

## 네트워크 토폴리지와 병목 현상

### 네트워크 토폴로지

| 종류        | 설명                                                 | 장점                                                                                                               | 단점                                                                          |
| ----------- | ---------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------ | ----------------------------------------------------------------------------- |
| 트리/계층형 | 트리 형태로 배치한 네트워크 구성                     | 노드 추가, 삭제가 쉬움                                                                                             | 특정 노드에 트래픽이 집중될 때 하위 노드에 영향을 끼칠 수 있음                |
| 버스        | 중앙 통신 회선 하나에 여러 개의 노드가 연결되어 공유 | 근거리 통신망에서 사용                                                                                             | (별도 단점 내용이 없으므로 비워두거나 적절히 작성)                            |
| 스타        | 중앙에 있는 노드에 모두 연결됨                       | - **쉬운 노드 추가 & 에러 탐지**<br/>- **패킷 충돌 발생 가능성 낮음**<br/>- **에러 발생 시 다른 노드에 영향 적음** | - **중앙 노드 장애 시 전체 네트워크 사용 불가**<br/>- **설치 비용이 높음**    |
| 링형        | 전체적으로 고리처럼 양 옆의 노드가 연결되어 있음     | - **노드 수 증가 시 네트워크 손실 적음**<br/>- **충돌 발생 가능성 낮음**<br/>- **쉬운 고장 발견**                  | - **네트워크 구성 변경이 어려움**<br/>- **회선 장애 시 전체 네트워크에 영향** |

**스푸핑**
LAN상에서 송신부의 패킷을 송신과 관련 없는 다른 호스트에 가지 않도록 하는 스위칭 기능을 마비시키거나 속여서 특정 노드에 해당 패킷이 오도록 처리하는 것
스푸핑을 적용하면 올바르게 수신부로 가야 할 패킷이 악의적인 노드에 전달하게 됨

### 병목 현상

| 네트워크나 시스템에서 특정 구간이 과부하를 일으켜 전체 서비스의 성능이 저하되는 상황

네트워크의 구조(토폴로지)는 병목 현상을 찾을 때 중요한 기준이 된다

예를 들어, 서비스 이용자가 몰려 지연 시간이 길어졌을 때 대역폭만 늘려도 해결될 것 같지만, 실제로는 네트워크의 토폴로지나 회선 구성 등 다양한 요소가 원인일 수 있습니다.

따라서 네트워크가 어떤 구조로 연결되어 있는지, 각 구간마다 어느 정도의 트래픽을 처리하는지 파악해야 병목 구간을 정확히 찾아내고 적절한 방법(추가 회선 설치, 회선 경로 조정, 서버 간 연결 방식 변경 등)으로 성능을 개선할 수 있습니다.

## 네트워크 분류

네트워크는 규모를 기반으로 분류 가능함

**LAN** : 개인적으로 소유 가능한 규모
근거리 통신망을 의미하며 같은 건물이나 캠퍼스 같은 좁은 공간에서 운영
장점 - 전송 속도가 빠르고 혼잡하지 않음

**MAN** : 대도시 지역 네트워크를 나타내며 도시 같은 넓은 지역에서 운영
전송 속도는 평균이며 LAN보다는 더 많이 혼잡함

**WAN**
광역 네트워크를 의미하며 국가 또는 대륙 같은 더 넓은 지역에서 운영
전송 속도는 낮으며 MAN보다는 더 혼잡합니다.

## 네트워크 성능 분석 명령어

애플리케이션 코드상에는 전혀 문제가 없는데 사용자가 서비스로부터 데이터를 가져오지 못하는 상황이 발생되기도 하며, 이는 네트워크 병목 현상일 가능성이 있다.

**네트워크 병목 현상의 주된 원인**
|네트워크 대역폭|네트워크 토폴로지|서버 CPU, 메모리 사용량|비효율적인 네트워크 구성

이때는 네트워크 관련 테스트와 네트워크와 무관한 테스트를 통해 ‘네트워크로부터 발생한 문제점’인 것을 확인한 후 네트워크 성능 분석을 해봐야 합니다. 이때 사용되는 명령어

| 명령어   | 설명                                                                                                                                                                                                                |
| -------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| Ping     | -네트워크 상태를 확인하기 위해 노드로 일정 크기의 패킷을 전송<br/>- 패킷 수신 상태, 응답 시간, 네트워크 연결 여부를 확인<br/>-ICMP 프로토콜을 기반으로 동작, 지원하지 않는 기기나 차단된 네트워크에서는 사용 불가능 |
| netstat  | -접속되어 있는 서비스들의 네트워크 상태를 표시하는 데 사용됨<br/>-네트워크 접속, 라우팅 테이블, 네트워크 프로토콜 등 리스트를 보여줌<br/>서비스의 포트가 열여 있는지 확일할 때 사용                                 |
| nslookup | DNS에 관련된 내용을 확인하기 위해 사용<br/>특정 도메인에 매핑된 IP을 확인하기 위해                                                                                                                                  |
| tracert  | 목적지 노드까지 네트워크 경로를 확인할 때 사용하는 명령어<br/>목적지 노드까지 구간 중 어디서 느려지는 지 확인 가능                                                                                                  |

## 네트워크 프로토콜 표준화

- 다른 장치들끼리 데이터를 주고받기 위해 설정된 공통된 인터페이스
- 기업이나 개인이 발표해서 정하는 것이 아니라 IEEE 또는 IETF라는 표준화 단체가 이를 정함

---

# TCP/IP 4계층 모델

인터넷 프로토콜 스위트: 인터넷에서 컴퓨터들이 서로 정보를 주고받는 데 쓰이는 프로토콜의 집합
ex) TCP/IP 4계층 모델, OSI 7계층

## 계층 구조

| TCP/IP 4계층                       | OSI 7계층    |
| ---------------------------------- | ------------ |
|                                    | 애플리케이션 |
| [애플리케이션](#애플리케이션-계층) | 프레젠테이션 |
|                                    | 세션         |
| [전송](#전송-계층)                 | 전송         |
| [인터넷](#인터넷-계층)             | 네트워크     |
| [링크](#링크-계층)                 | 데이터 링크  |
|                                    | 물리         |

### 애플리케이션 계층

- FTP, HTTP, SSH, SMTP, DNS 등 응용 프로그램이 사용됨
- 웹 서비스, 이메일 등 서비스를 실질적으로 사람들에게 제공하는 층

**FTP**: 장치와 장치 간의 파일을 전송하는 데 사용되는 표준 통신 프로토콜
**SSH**: 보안되지 않은 네트워크에서 네트워크 서비스를 안전하게 운영하기 위한 암호화 네트워크 프로토콜
**HTTP**: WWW를 위한 데이터 통신의 기초이자 웹 사이트를 이용하는 게 쓰는 프로토콜
**SMTP**: 전자 메일 전송을 위한 인터넷 표준 통신 프로토콜
**DNS**: 도메인 이름과 IP주소를 맵핑해주는 서버

### 전송 계층

- TCP, UDP
- 송신자와 수신자를 연결하는 통신 서비스를 제공
- 연결 지향 데이터 스트림 지원
- 신뢰성, 흐름 제어를 제공
- 애플리케이션과 인터켓 계층 사이의 데이터가 전달 중계 역할

| **TCP**                                                                                                                                              | **UDP** |
| ---------------------------------------------------------------------------------------------------------------------------------------------------- | ------- |
| - 패킷 사이의 순서를 보장 </br>- 연결지향 프로토콜을 사용해서 연결</br>- 신뢰성을 구축해서 수신 여부를 확인</br>- **가상회선 패킷 교환 방식**을 사용 |
| - 순서를 보장하지 않음 </br>-수신 여부를 확인하지 않음 </br>-단순히 데이터만 주는 **데이터그램 패킷 교환 방식**을 사용                               |

**가상 회선 패킷 교환 방식**
각 패킷에는 가상회선 식별자가 포함되어 모든 패킷을 전송하면 가상회선이 해제되고 패킷들은 전송된 ‘순서대로’ 도착하는 방식

**데이터그램 패킷 교환 방식**
데이터그램 패킷 교환 방식이란 패킷이 독립적으로 이동하며 최적의 경로를 선택하여 가는데, 하나의 메시지에서 분할된 여러 패킷은 서로 다른 경로로 전송될 수 있으며 도착한 순서가 다를 수 있는 방식

**TCP 연결 성립 과정**
신뢰성을 확보할 때 _3-way handshake_ 작업을 진행 (TCP)

클라이언트와 서버가 통신할 때 3단계의 과정 이후 신뢰성이 구축되고 데이터 전송을 시작

1. SYN 단계: 클라이언트는 서버에 클라이언트의 ISN을 담아 SYN을 보냅니다. ISN은 새로운 TCP 연결의 첫 번째 패킷에 할당된 임의 시퀸스 번호를 말하며 이는 장치마다 다를 수 있습니다.
2. SYN + ACK 단계: 서버는 클라이언트의 SYN을 수신하고 서버의 ISN을 보내며 승인번호로 클라이언트의 iSN + 1을 보냅니다
3. ACK 단계: 클라이언트는 서버의 iSN + 1한 값인 승인번호를 담아 ACK를 서버에 보냅니다.

SYN : 연결 요청 플래그
ACK: 응답 플래그
ISN: 초기 네트워크 연결을 할 때 할당된 32비트 고유 시퀸스 번호

**TCP 연결 해제 과정**
TCP가 연결 해제할 때는 4-웨이 핸드쉐이트가 발생

1. 먼저 클라이언트가 연결을 닫으려고 할 깨 FIN으로 설정된 세그먼틀르 보냅니다. 그리고ㅓ 클라이언트는 ㅡFIN_WAIT_1 상태로 들어가고 서버의 응답을 기다립니다
2. 서버는 클라이언트로 ACK라는 승인 세그먼트를 보냅니다, 그리고 CLOSE_WAIT 상태에 들어 갑니다, 클라이언트가 세그먼트를 받으면 FIN_WAIT_2 상태에 들어갑니다
3. 서버는 ACK를 보내고 일정 시간 이후에 클라이언트에 FIN이라는 세그먼트를 보냅니다
4. 클라이언트는 TIME_WAIT 상태가 되고 다시 서버로 ACK를 보내서 서버는 CLOSED 상태가 됩니다, 이후 클라이언트는 어느 정도의 시간을 대기한 후 연결이 닫히고 클라이언트와 서버의 모든 자원의 연결이 해제됩니다.

_TIME_WAIT에서 바로 닫지 않고 일정 시간 뒤에 닫는 이유_

1. 지연 패킷이 발생할 경우를 대비하기 위함
   - 패킷이 뒤늦게 도달하고 이를 처리하지 못한다면 데이터 무결성 문제가 발생
     ex) 전체 데이터가 100일 때 일부 데이터인 50만 들어오는 현상이 발생할 수도 있다
2. 두 장치가 연결이 닫혔는지 확인
   - 만약 LAST_ACK 상태에서 닫히게 되면 다시 새로운 연결을 하려고 할 떄 장치는 줄곧 LAST_ACK로 되어 있기 떄문에 접속 오류가 나타남

TIME_WAIT: 소켓이 바로 소멸되지 않고 일정 시간 유지되는 상태를 말하며 지연 패킷 등의 문제점을 해결하는 게 쓰인다.

데이터 무결성: 데이터의 정확성과 일관성을 유지하고 보증하는 것

### 인터넷 계층

- 장치로부터 받은 네트워크 패킷을 IP주소로 지정된 목적지로 전송하기 위해 사용되는 계층
- IP, ARP, ICMP
- 패킷을 수신해야 할 상대의 주소를 지정하여 데이터를 전달
- 상대방이 제대로 받았는지에 대해 보장하지 않은 비연결형적인 특징을 가짐

### 링크 계층

- 실질적으로 데이터를 저달하며 장치 간에 신호를 주고받는 규칙을 정하는 계층
- 전선, 광섬유, 무선
- 네트워크 접근 계층이라고도 함

물리 계층과 데이터 링크 계층으로 나누기도 함
**물리 계층**: 무선 LAN과 *유선 LAN*을 통해 0과 1로 이루어진 데이터를 보내는 계층
**데이터 링크 계층**: 이더넷 프레임을 통해 에러 확인, 흐름제어, 접근 제어를 담당하는 계층

- 유선 LAN을 이루는 이더넷은 IEEE802.3이라는 프로토콜을 따르며 *전이중화 통신*을 씀
- 정이중화 통신: 양쪽 장치가 동시에 송수신할 수 있는 방식, 송신로와 수신로로 나눠서 데이터를 주고받음, 현대의 고속 이더넷은 이 방식을 기반으로 통신함

## PDU
